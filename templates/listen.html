
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Listen to something</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <link rel="icon" href="/img/favicon.png" type="image/png" />
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      
      .bigdiv{
	      text-align: center;
      }
      
      .btn{
	      margin-top: 20px;
      }
      
    </style>
    {%block style%}
    {%endblock%}
<!--     <link href="../css/bootstrap-responsive.min.css" rel="stylesheet"> -->

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png">
  </head>

  <body>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span3 bigdiv">
        	<p class="lead">Value from channel:</p>
        	<p id="value" class="lead">Not Connected</p>
        </div><!--/span-->
      </div><!--/row-->

    </div><!--/.fluid-container-->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="http://js.pusher.com/1.12/pusher.min.js"></script>
    <script type="text/javascript">
	    
	    $(document).on("ready",function(){
		   
		   //init the pusher client
		   var pusher = new Pusher('e3d1f6a988eee7ce38e1');
		   Pusher.channel_auth_endpoint = '/authenticate';
		    var channel = pusher.subscribe('private-sencha');
		    channel.bind('test', function(data) {
		      $("#value").text(data)
		    });
		    
		    //need to init with a authentication endpoint in order to use private channels
		    
		    channel.bind('pusher:subscription_succeeded', function() {
			  $("#value").text("Waiting for event")
			});
		    
	    });
	    
    </script>


  </body>
</html>
